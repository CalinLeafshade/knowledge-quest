!function(){function MainController(mySocket){function toggleWedge(wedge){vm.me.wedges.indexOf(wedge)>-1?vm.me.wedges=_.without(vm.me.wedges,wedge):vm.me.wedges.push(wedge),socket.emit("wedge",vm.me.wedges)}function rollDice(){vm.joined&&socket.emit("roll")}function moveClick(ev){vm.joined&&socket.emit("move",[ev.offsetX,ev.offsetY])}function join(){vm.name&&socket.emit("join",vm.name)}var socket=mySocket,vm=this;vm.joined=!1,vm.me=null,vm.name=null,vm.players=[],vm.join=join,vm.moveClick=moveClick,vm.lastRoll=null,vm.rollDice=rollDice,vm.wedgeColors=["blue","pink","brown","yellow","green","orange"],vm.pieceColors={red:"#F22613",green:"#26A65B",pink:"#F64747",orange:"#F89406",blue:"#4183D7",yellow:"#F4D03F",purple:"#663399",grey:"#6C7A89",darkred:"#96281B",darkblue:"#1F3A93"},vm.toggleWedge=toggleWedge,socket.on("accept",function(player){vm.me=player,vm.joined=!0}),socket.on("update",function(data){for(var i=vm.players.length-1;i>=0;i--)null==data.find(function(d){return d.id==vm.players[i].id})&&vm.players.splice(i,1);data.forEach(function(d){var p=vm.players.find(function(p){return p.id==d.id});p||(p=d,vm.players.push(p)),p.position=d.position,p.name=d.name,p.wedges=d.wedges,p.color=d.color,vm.me&&p.id==vm.me.id&&(vm.me=p)})}),socket.on("roll",function(val){vm.lastRoll={who:val.player.name,roll:val.roll}})}var app=angular.module("knowledge-quest",["btford.socket-io"]).factory("mySocket",function(socketFactory){return socketFactory()}).controller("MainCtrl",MainController);app.factory("socket",["$rootScope",function($rootScope){var socket=io.connect();return{on:function(eventName,callback){socket.on(eventName,function(){var args=arguments;$rootScope.$apply(function(){callback.apply(socket,args)})})},emit:function(eventName,data,callback){socket.emit(eventName,data,function(){var args=arguments;$rootScope.$apply(function(){callback&&callback.apply(socket,args)})})}}}]),MainController.$inject=["mySocket"]}();
//# sourceMappingURL=app.js.map